<!DOCTYPE html>
<html lang="en">
   <head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>Bhagavad Gita Bot</title>
      <meta name="description" content="Explore Bhagavad Gita shlokas in Telugu with SGS and Sringeri styles, featuring audio recitations and meanings.">
      <meta name="keywords" content="Bhagavad Gita, SGS, Sringeri, Telugu shlokas, audio recitation, spiritual app">
      <meta name="author" content="Dr. P. Udayabhaskar">
      <meta name="robots" content="index, follow">
      <link rel="canonical" href="https://pubsaroja.github.io/bhagavad-gita-bot/">
      <style type="text/css">@font-face {font-family:Ramabhadra;font-style:normal;font-weight:400;src:url(/cf-fonts/s/ramabhadra/5.0.11/latin/400/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Ramabhadra;font-style:normal;font-weight:400;src:url(/cf-fonts/s/ramabhadra/5.0.11/telugu/400/normal.woff2);unicode-range:U+0951-0952,U+0964-0965,U+0C00-0C7F,U+1CDA,U+200C-200D,U+25CC;font-display:swap;}</style>
      <style type="text/css">@font-face {font-family:Outfit;font-style:normal;font-weight:300;src:url(/cf-fonts/v/outfit/5.0.11/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Outfit;font-style:normal;font-weight:300;src:url(/cf-fonts/v/outfit/5.0.11/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}</style>
      <style type="text/css">@font-face {font-family:Noto Sans Telugu;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans-telugu/5.0.12/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Noto Sans Telugu;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans-telugu/5.0.12/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Noto Sans Telugu;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans-telugu/5.0.12/telugu/wght/normal.woff2);unicode-range:U+0951-0952,U+0964-0965,U+0C00-0C7F,U+1CDA,U+200C-200D,U+25CC;font-display:swap;}</style>
      <style type="text/css">@font-face {font-family:Noto Sans Devanagari;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans-devanagari/5.0.11/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Noto Sans Devanagari;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans-devanagari/5.0.11/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Noto Sans Devanagari;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans-devanagari/5.0.11/devanagari/wght/normal.woff2);unicode-range:U+0900-097F,U+1CD0-1CF9,U+200C-200D,U+20A8,U+20B9,U+25CC,U+A830-A839,U+A8E0-A8FF;font-display:swap;}</style>
      <style type="text/css">@font-face {font-family:Noto Sans Kannada;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans-kannada/5.0.12/kannada/wght/normal.woff2);unicode-range:U+0964-0965,U+0C80-0CF2,U+200C-200D,U+20B9,U+25CC;font-display:swap;}@font-face {font-family:Noto Sans Kannada;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans-kannada/5.0.12/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Noto Sans Kannada;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans-kannada/5.0.12/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}</style>
      <style type="text/css">@font-face {font-family:Noto Sans Tamil;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans-tamil/5.0.11/latin/wght/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Noto Sans Tamil;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans-tamil/5.0.11/latin-ext/wght/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Noto Sans Tamil;font-style:normal;font-weight:400;src:url(/cf-fonts/v/noto-sans-tamil/5.0.11/tamil/wght/normal.woff2);unicode-range:U+0964-0965,U+0B82-0BFA,U+200C-200D,U+20B9,U+25CC;font-display:swap;}</style>
      <!-- Intro.js for elegant guided tours -->
      <link rel="stylesheet" href="https://unpkg.com/intro.js/minified/introjs.min.css">
      <script src="https://unpkg.com/intro.js/minified/intro.min.js"></script>
      <style>
         /* [All your existing CSS remains exactly the same] */
         :root {
         --bg-color: #f0f0f0;
         --text-color: #2c3e50;
         --card-bg: #ffffff;
         --card-border: #357EC7;
         --button-bg: #357EC7;
         --button-text: #ffffff;
         --button-hover-bg: #1e40af;
         --header-color: #2c3e50;
         --subheader-color: #34495e;
         --input-border: #ccc;
         --modal-bg: #ffffff;
         --verse-button-bg: #f9f9f9;
         --verse-button-hover-bg: #e0e0e0;
         --intro-overlay: rgba(0,0,0,0.5);
         --intro-button-bg: #e5e7eb;
         --intro-button-text: #111827;
         --intro-tooltip-bg: #ffffff;
         }
         [data-theme="dark"] {
         --bg-color: #1a1a1a;
         --text-color: #ffffff;
         --card-bg: #2a2a2a;
         --card-border: #4a90e2;
         --button-bg: #4a90e2;
         --button-text: #ffffff;
         --button-hover-bg: #357abd;
         --header-color: #ffffff;
         --subheader-color: #cccccc;
         --input-border: #444;
         --modal-bg: #2a2a2a;
         --verse-button-bg: #333;
         --verse-button-hover-bg: #444;
         --intro-overlay: rgba(0,0,0,0.7);
         --intro-button-bg: #444;
         --intro-button-text: #ffffff;
         --intro-tooltip-bg: #333;
         }
         *, *::before, *::after { box-sizing: border-box; }
         body { font-family: Outfit, sans-serif; text-align: center; padding: 20px; margin: 0; background-color: var(--bg-color); color: var(--text-color); overflow-x: hidden; transition: all 0.3s ease; }
         h1 { color: var(--header-color); font-size: 1.5em; }
         h2 { color: var(--subheader-color); font-size: 1em; margin-top: 10px; }
         .theme-toggle { position: fixed; top: 10px; right: 10px; display: flex; gap: 10px; z-index: 1001; }
         .theme-toggle button { background: none; border: none; cursor: pointer; font-size: 20px; color: var(--text-color); opacity: 0.6; transition: opacity 0.3s; }
         .theme-toggle button:hover, .theme-toggle button.active { opacity: 1; }
         .page-frame { max-width: 900px; margin: 8px auto; padding: 12px; border: 2px solid var(--card-border); border-radius: 10px; background: var(--card-bg); box-shadow: 0 2px 6px rgba(0,0,0,0.04); }
         @media (max-width: 600px) { .page-frame { margin: 4px; padding: 16px; border-radius: 10px; border-width: 4px; overflow: hidden; } }
         .top-buttons { display: flex; justify-content: center; gap: 10px; width: 100%; max-width: 600px; margin: 0 auto; padding-left: 12px; padding-right: 12px; box-sizing: border-box; }
         .top-buttons button { width: 150px; height: 150px; border-radius: 25%; border: none; background-color: var(--button-bg); color: var(--button-text); font-size: 20px; cursor: pointer; transition: background 0.3s ease; background-repeat: no-repeat; background-position: center; background-size: cover; }
         .top-buttons button.sgs-button:hover, .top-buttons button.sgs-button:active { background-image: url('https://raw.githubusercontent.com/pubsaroja/bhagavad-gita-bot/main/sankhu.png'); background-color: transparent !important; color: transparent !important; }
         .top-buttons button.sringeri-button:hover, .top-buttons button.sringeri-button:active, .top-buttons button.third-paada-button:hover, .top-buttons button.third-paada-button:active { background-image: url('https://raw.githubusercontent.com/pubsaroja/bhagavad-gita-bot/main/chakra.png'); background-color: transparent !important; color: transparent !important; }
         .top-buttons button.reset, .top-buttons button.reset:hover, .top-buttons button.reset:active, .top-buttons button.reset:focus { background: var(--button-bg) !important; color: var(--button-text) !important; background-image: none !important; }
         /* Rest of your existing styles remain unchanged... */
         .button-groups { display: flex; justify-content: center; gap: 10px; max-width: 600px; margin: 0 auto; width: 100%; padding-left: 12px; padding-right: 12px; box-sizing: border-box; }
         .button-group { display: flex; flex-direction: column; gap: 10px; width: 50%; }
         .button-groups button { background-color: var(--button-bg); color: var(--button-text); padding: 10px 18px; border: none; border-radius: 5px; cursor: pointer; font-family: 'Outfit', sans-serif; font-size: 1.6em; width: 100%; max-width: 150px; transition: background-color 0.3s ease; }
         .button-groups button:hover { background-color: var(--card-bg); color: transparent; }
         .dropdown-container { display: flex; flex-direction: column; gap: 20px; max-width: 600px; margin: 0 auto; border: 2px solid var(--card-border); border-radius: 5px; padding: 10px 12px; box-sizing: border-box; }
         .dropdown-item { display: flex; flex-direction: column; }
         .dropdown-label { margin-bottom: 6px; font-weight: bold; font-size: 1em; color: var(--header-color); }
         select { width: 100%; padding: 8px; font-size: 1em; border-radius: 5px; border: 1px solid var(--input-border); background-color: var(--card-bg); color: var(--text-color); }
         .shloka-text { margin-top: 10px; font-size: 1.5em; color: var(--text-color); white-space: pre-wrap; max-width: 100%; margin-left: 0; margin-right: 0; line-height: 1.5; min-height: 3em; overflow-y: auto; padding: 0; display: none; justify-content: center; align-items: center; text-align: center; font-family: 'Noto Sans Telugu', 'Noto Sans Devanagari', 'Noto Sans Kannada', 'Noto Sans Tamil', sans-serif; box-sizing: border-box; }
         .shloka-text.active { display: flex; }
         .shloka-text.active.multiline { display: block; text-align: left; }
         .shloka-number { font-weight: bold; margin-bottom: 5px; text-align: left; font-size: 1em; }
         .shloka-lines { text-align: left; }
         #sgsText, #sringeriText { display: block; width: 100%; white-space: pre-line !important; word-wrap: break-word; overflow-wrap: break-word; overflow-wrap: anywhere; word-break: break-word; hyphens: auto; text-align: center; margin-left: 0; margin-right: 0; max-width: 100%; font-family: 'Noto Sans Telugu', 'Noto Sans Devanagari', 'Noto Sans Kannada', 'Noto Sans Tamil', sans-serif; font-size: 1.5em; line-height: 1.5; border: none; padding: 0; overflow-y: auto; overflow-x: auto; min-height: 3em; box-sizing: border-box; }
         #sgsText > div, #sringeriText > div { display: block; width: 100%; margin-bottom: 1em; }
         .hidden { display: none !important; }
         .shloka-text.visible { display: flex !important; flex-direction: column; align-items: center; justify-content: center; text-align: center; }
         .shloka-text.placeholder { display: flex !important; flex-direction: column; align-items: center; justify-content: center; text-align: center; }
         .shloka-text.visible.multiline { display: block !important; text-align: left; }
         .visible { display: block !important; }
         #audioPlayer { margin: 10px auto; display: block; flex-shrink: 0; }
         .radio-group { margin: 10px 0; display: flex; justify-content: center; align-items: center; gap: 10px; width: 100%; max-width: 600px; margin-left: auto; margin-right: auto; padding-left: 12px; padding-right: 12px; box-sizing: border-box; }
         .radio-group label { margin: 0 10px; color: var(--text-color); }
         .radio-group input[type="text"] { padding: 8px; font-size: 1em; border-radius: 5px; border: 1px solid var(--input-border); background-color: var(--card-bg); color: var(--text-color); }
         .radio-group input[type="submit"] { background-color: var(--button-bg); color: var(--button-text); padding: 8px 15px; border: none; border-radius: 5px; cursor: pointer; transition: background-color 0.3s ease; }
         .radio-group input[type="submit"]:hover { background-color: var(--button-hover-bg); }
         .textbox-container { display: flex; flex-direction: column; align-items: stretch; gap: 10px; width: 100%; max-width: 600px; margin: 12px auto 0; padding-left: 12px; padding-right: 12px; border: 2px solid var(--card-border); border-radius: 5px; box-sizing: border-box; }
         .textbox-container > div { width: 100%; max-width: 100%; }
         .textbox-label { font-weight: bold; margin-bottom: 5px; display: none; color: var(--header-color); }
         .textbox-label.active { display: block; }
         .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: var(--intro-overlay); justify-content: center; align-items: center; z-index: 1000; }
         .modal-content { background-color: var(--modal-bg); padding: 20px; border-radius: 5px; max-width: 80%; max-height: 80%; overflow-y: auto; border: 2px solid var(--card-border); }
         .chapter-select { margin-bottom: 10px; padding: 10px; font-size: 1em; border-radius: 5px; width: 100%; max-width: 200px; background-color: var(--card-bg); color: var(--text-color); border: 1px solid var(--input-border); }
         .verse-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(60px, 1fr)); gap: 10px; padding: 10px; }
         .verse-button { background-color: var(--verse-button-bg); border: 1px solid var(--card-border); border-radius: 5px; padding: 10px; text-align: center; cursor: pointer; font-size: 0.9em; color: var(--text-color); }
         .verse-button:hover { background-color: var(--verse-button-hover-bg); }
         .close-button { background-color: #ff4444; color: white; padding: 5px 10px; border: none; border-radius: 5px; cursor: pointer; float: right; }
         .close-button:hover { background-color: #cc0000; }
         .credits { font-size: 0.9em; color: var(--text-color); margin-top: 10px; }
         .player-container { display: grid; grid-template-columns: repeat(3, max-content); grid-template-rows: repeat(2, auto); gap: 10px 5px; justify-content: center; justify-items: center; align-items: center; max-width: 600px; margin: 20px auto 0; width: 100%; box-sizing: border-box; border: none; border-radius: 5px; padding: 12px; }
         .player-container button { width: 100px; height: 40px; border: none; border-radius: 25px; background-color: var(--button-bg); color: var(--button-text); font-family: 'Outfit', sans-serif; font-size: 16px; cursor: pointer; padding: 0 15px; transition: background 0.3s ease; justify-self: center; align-self: center; }
         .player-container button:hover { background-color: var(--button-hover-bg); }
         .introjs-overlay { background: var(--intro-overlay); }
         .introjs-helperLayer { box-shadow: 0 8px 24px rgba(0,0,0,0.25); border-radius: 10px; }
         .introjs-tooltip { border-radius: 12px; font-family: Outfit, sans-serif; line-height: 1.4; color: var(--text-color); background-color: var(--intro-tooltip-bg); }
         .introjs-button { border-radius: 999px; padding: 6px 14px; border: none; }
         .introjs-skipbutton, .introjs-prevbutton { background: var(--intro-button-bg); color: var(--intro-button-text); }
         .introjs-nextbutton, .introjs-donebutton { background: var(--button-bg); color: var(--button-text); }
         @media (max-width: 600px) {
            body { padding: 6px; }
            .top-buttons, .button-groups, .dropdown-container, .radio-group, .player-container, .textbox-container { width: 100%; max-width: 100%; margin: 0 auto; padding-left: 12px; padding-right: 12px; box-sizing: border-box; flex-wrap: wrap; }
            .top-buttons { margin-top: 6px; gap: 5px; flex-direction: row; }
            .player-container { margin-top: 12px; padding-left: 12px; padding-right: 12px; grid-template-columns: repeat(3, 1fr); }
            .player-container button { width: 100%; }
            .shloka-text { font-size: 1.25em; padding: 0; text-align: left; overflow-x: auto; }
            #sgsText, #sringeriText { font-size: 1.25em; text-align: left; padding-left: 0; white-space: pre-line; word-wrap: break-word; overflow-wrap: break-word; overflow-wrap: anywhere; word-break: break-word; hyphens: auto; overflow-x: auto; }
            .button-groups { margin-top: 12px; gap: 5px; flex-direction: row; }
            .button-group { width: 50%; gap: 5px; }
            .top-buttons button { flex: 1 1 calc(33.333% - 10px); max-width: none; height: auto; aspect-ratio: 1/1; font-size: 0.8em; }
            .button-groups button { padding: 6px 12px; font-size: 0.8em; max-width: 100%; }
         }
      </style>
   </head>
   <body>
      <div class="theme-toggle" data-intro="Change the theme Light or Dark" data-title="Theme">
         <button id="themeLight" title="Light Theme" data-theme="light" class="active">‚òÄÔ∏è</button>
         <button id="themeDark" title="Dark Theme" data-theme="dark">üåô</button>
      </div>
      <div class="page-frame">
         <h1>Srimad Bhagavad Gita</h1>
         <p>Listen, understand and memorize Bhagavad Gita shlokas</p>
         <div class="top-buttons" data-intro="Choose how you want to hear the shloka" data-title="Playback Options">
            <button class="sgs-button" onclick="sendCommand('SGSFirstPaada')" data-intro="Play only 1st Paada in SGS style" data-title="1st Paada (SGS)">1st Paada<br>Only</button>
            <button class="sringeri-button" onclick="sendCommand('SringeriPaada')" data-intro="Play 1st or 3rd Paada in Sringeri style" data-title="1st or 3rd Paada (Sringeri)">1st or 3rd Paada</button>
            <button class="third-paada-button" onclick="sendCommand('ThirdPaada')" data-intro="Play only 3rd Paada" data-title="3rd Paada Only">3rd Paada<br>Only</button>
         </div>
         <audio id="audioPlayer" controls data-intro="Use these controls to play, pause, or scrub through the audio." data-title="Audio Player"></audio>
         <div class="radio-group" data-intro="Pick the chanting style for display and playback" data-title="Chanting Style">
            <label>Style:</label>
            <input type="radio" name="style" value="sgs" id="sgs" onchange="updateTextboxVisibility()">
            <label for="sgs">SGS</label>
            <input type="radio" name="style" value="sringeri" id="sringeri" checked onchange="updateTextboxVisibility()">
            <label for="sringeri">Sringeri</label>
         </div>
         <div class="player-container">
            <button onclick="sendCommand('PreviousShloka')" data-intro="Go to previous shloka" data-title="Previous">Previous</button>
            <button onclick="sendCommand('FullShloka')" data-intro="Play the full shloka" data-title="Full Shloka">Full</button>
            <button onclick="sendCommand('NextFullShloka')" data-intro="Go to next shloka" data-title="Next">Next</button>
         </div>
         <div class="radio-group language-group">
            <label>Languages:</label>
            <div style="display:grid; grid-template-columns: repeat(3, 1fr); gap:10px; margin-top:8px;">
               <label><input type="checkbox" name="language" value="te" id="telugu" checked> Telugu</label>
               <label><input type="checkbox" name="language" value="sa" id="devanagari"> Devanagari</label>
               <label><input type="checkbox" name="language" value="en" id="english"> English</label>
               <label><input type="checkbox" name="language" value="kn" id="kannada"> Kannada</label>
               <label><input type="checkbox" name="language" value="ta" id="tamil"> Tamil</label>
            </div>
         </div>
         <div class="textbox-container">
            <div>
               <div id="sgsLabel" class="textbox-label">SGS Style Shloka</div>
               <div id="sgsText" class="shloka-text hidden">Your Shloka will appear here.</div>
            </div>
            <div>
               <div id="sringeriLabel" class="textbox-label active">Sringeri Style Shloka</div>
               <div id="sringeriText" class="shloka-text visible">Your Shloka will appear here.</div>
            </div>
         </div>

         <!-- Main buttons -->
         <div class="player-container">
            <button id="meaningsButton" onclick="handleMeanings()" data-intro="Toggle word-by-word and overall meaning" data-title="Meanings">Meanings</button>
            <button onclick="showVerseTable()" data-intro="Open chapter/verse selector" data-title="Selector">Selector</button>
            <button id="instructionsButton" onclick="toggleInstructions()" data-intro="Start a guided tour of the app" data-title="Help">Help</button>
            <button id="groupButton" onclick="window.open('https://pubsaroja.github.io/gita-voice-bot-web/GroupedShlokas.html', '_blank')" data-intro="Open carefully curated grouped shlokas helpful in memorizing the shloka numbers in a new tab" data-title="Grouped Shlokas">Grouped Shlokas</button>
            <button onclick="showConfusing()" data-intro="Listen to a set of often-confused shlokas" data-title="Confusing Shlokas">Confusing Shlokas</button>
            <button id="showUvacha" onclick="showUvacha()" data-intro="Play a random 'Uvacha' shloka" data-title="Uvacha">Uvacha</button>
         </div>

         <!-- NEW: Auto Random Buttons (infinite loop with 60s pause) -->
         <div class="top-buttons" style="margin-top: 20px; gap: 15px;">
            <button class="sgs-button auto-random-btn" onclick="startAutoRandom('sgs')" data-intro="SGS style ‚Üí Random shloka ‚Üí wait 60s ‚Üí next (infinite)" data-title="Auto Random (SGS)">Auto Random<br>SGS</button>
            <button class="sringeri-button auto-random-btn" onclick="startAutoRandom('sringeri')" data-intro="Sringeri style ‚Üí Random shloka ‚Üí wait 60s ‚Üí next (infinite)" data-title="Auto Random (Sringeri)">Auto Random<br>Sringeri</button>
            <button class="third-paada-button auto-random-btn" onclick="startAutoRandom('mixed')" data-intro="Mixed style ‚Üí Random shloka ‚Üí wait 60s ‚Üí next (infinite)" data-title="Auto Random (Mixed)">Auto Random<br>Mixed</button>
         </div>

         <br>
         <div class="dropdown-container">
            <div>
               <label for="chapterSelect" style="display:block; font-family:Outfit, sans-serif; font-size:1.1em;">Random Shloka Chapterwise:</label>
               <select id="chapterSelect" onchange="handleChapterSelect(this)" data-intro="Pick a chapter to play a random shloka from it" data-title="Random by Chapter">
                  <option value="" selected disabled>Select Chapter</option>
                  <!-- options 1 to 18 -->
                  <option value="1">1. ‡∞Ö‡∞∞‡±ç‡∞ú‡±Å‡∞®‡∞µ‡∞ø‡∞∑‡∞æ‡∞¶‡∞Ø‡±ã‡∞ó‡∞É</option><option value="2">2. ‡∞∏‡∞æ‡∞ô‡±ç‡∞ñ‡±ç‡∞Ø‡∞Ø‡±ã‡∞ó‡∞É</option><option value="3">3. ‡∞ï‡∞∞‡±ç‡∞Æ‡∞Ø‡±ã‡∞ó‡∞É</option><option value="4">4. ‡∞ú‡±ç‡∞û‡∞æ‡∞®‡∞Ø‡±ã‡∞ó‡∞É</option><option value="5">5. ‡∞ï‡∞∞‡±ç‡∞Æ‡∞∏‡∞®‡±ç‡∞®‡±ç‡∞Ø‡∞æ‡∞∏‡∞Ø‡±ã‡∞ó‡∞É</option><option value="6">6. ‡∞Ü‡∞§‡±ç‡∞Æ‡∞∏‡∞Ç‡∞Ø‡∞Æ‡∞Ø‡±ã‡∞ó‡∞É</option><option value="7">7. ‡∞ú‡±ç‡∞û‡∞æ‡∞®‡∞µ‡∞ø‡∞ú‡±ç‡∞û‡∞æ‡∞®‡∞Ø‡±ã‡∞ó‡∞É</option><option value="8">8. ‡∞Ö‡∞ï‡±ç‡∞∑‡∞∞‡∞™‡∞∞‡∞¨‡±ç‡∞∞‡∞π‡±ç‡∞Æ‡∞Ø‡±ã‡∞ó‡∞É</option><option value="9">9. ‡∞∞‡∞æ‡∞ú‡∞µ‡∞ø‡∞¶‡±ç‡∞Ø‡∞æ‡∞∞‡∞æ‡∞ú‡∞ó‡±Å‡∞π‡±ç‡∞Ø‡∞Ø‡±ã‡∞ó‡∞É</option><option value="10">10. ‡∞µ‡∞ø‡∞≠‡±Ç‡∞§‡∞ø‡∞Ø‡±ã‡∞ó‡∞É</option><option value="11">11. ‡∞µ‡∞ø‡∞∂‡±ç‡∞µ‡∞∞‡±Ç‡∞™‡∞∏‡∞®‡±ç‡∞¶‡∞∞‡±ç‡∞∂‡∞®‡∞Ø‡±ã‡∞ó‡∞É</option><option value="12">12. ‡∞≠‡∞ï‡±ç‡∞§‡∞ø‡∞Ø‡±ã‡∞ó‡∞É</option><option value="13">13. ‡∞ï‡±ç‡∞∑‡±á‡∞§‡±ç‡∞∞‡∞ï‡±ç‡∞∑‡±á‡∞§‡±ç‡∞∞‡∞ú‡±ç‡∞û‡∞µ‡∞ø‡∞≠‡∞æ‡∞ó‡∞Ø‡±ã‡∞ó‡∞É</option><option value="14">14. ‡∞ó‡±Å‡∞£‡∞§‡±ç‡∞∞‡∞Ø‡∞µ‡∞ø‡∞≠‡∞æ‡∞ó‡∞Ø‡±ã‡∞ó‡∞É</option><option value="15">15. ‡∞™‡±Å‡∞∞‡±Å‡∞∑‡±ã‡∞§‡±ç‡∞§‡∞Æ‡∞™‡±ç‡∞∞‡∞æ‡∞™‡±ç‡∞§‡∞ø‡∞Ø‡±ã‡∞ó‡∞É</option><option value="16">16. ‡∞¶‡±à‡∞µ‡∞æ‡∞∏‡±Å‡∞∞‡∞∏‡∞Æ‡±ç‡∞™‡∞¶‡±ç‡∞µ‡∞ø‡∞≠‡∞æ‡∞ó‡∞Ø‡±ã‡∞ó‡∞É</option><option value="17">17. ‡∞∂‡±ç‡∞∞‡∞¶‡±ç‡∞ß‡∞æ‡∞§‡±ç‡∞∞‡∞Ø‡∞µ‡∞ø‡∞≠‡∞æ‡∞ó‡∞Ø‡±ã‡∞ó‡∞É</option><option value="18">18. ‡∞Æ‡±ã‡∞ï‡±ç‡∞∑‡∞∏‡∞®‡±ç‡∞®‡±ç‡∞Ø‡∞æ‡∞∏‡∞Ø‡±ã‡∞ó‡∞É</option>
               </select>
            </div>
            <div>
               <label for="continuousPlaySelect" style="display:block; font-family:Outfit, sans-serif; font-size:1.1em;">Continuous Play:</label>
               <select id="continuousPlaySelect" onchange="handleContinuousPlay(this)" data-intro="Play an entire chapter continuously" data-title="Continuous Play">
                  <option value="" selected disabled>Select Chapter</option>
                  <!-- same options as above -->
                  <option value="1">1. ‡∞Ö‡∞∞‡±ç‡∞ú‡±Å‡∞®‡∞µ‡∞ø‡∞∑‡∞æ‡∞¶‡∞Ø‡±ã‡∞ó‡∞É</option><option value="2">2. ‡∞∏‡∞æ‡∞ô‡±ç‡∞ñ‡±ç‡∞Ø‡∞Ø‡±ã‡∞ó‡∞É</option><option value="3">3. ‡∞ï‡∞∞‡±ç‡∞Æ‡∞Ø‡±ã‡∞ó‡∞É</option><option value="4">4. ‡∞ú‡±ç‡∞û‡∞æ‡∞®‡∞Ø‡±ã‡∞ó‡∞É</option><option value="5">5. ‡∞ï‡∞∞‡±ç‡∞Æ‡∞∏‡∞®‡±ç‡∞®‡±ç‡∞Ø‡∞æ‡∞∏‡∞Ø‡±ã‡∞ó‡∞É</option><option value="6">6. ‡∞Ü‡∞§‡±ç‡∞Æ‡∞∏‡∞Ç‡∞Ø‡∞Æ‡∞Ø‡±ã‡∞ó‡∞É</option><option value="7">7. ‡∞ú‡±ç‡∞û‡∞æ‡∞®‡∞µ‡∞ø‡∞ú‡±ç‡∞û‡∞æ‡∞®‡∞Ø‡±ã‡∞ó‡∞É</option><option value="8">8. ‡∞Ö‡∞ï‡±ç‡∞∑‡∞∞‡∞™‡∞∞‡∞¨‡±ç‡∞∞‡∞π‡±ç‡∞Æ‡∞Ø‡±ã‡∞ó‡∞É</option><option value="9">9. ‡∞∞‡∞æ‡∞ú‡∞µ‡∞ø‡∞¶‡±ç‡∞Ø‡∞æ‡∞∞‡∞æ‡∞ú‡∞ó‡±Å‡∞π‡±ç‡∞Ø‡∞Ø‡±ã‡∞ó‡∞É</option><option value="10">10. ‡∞µ‡∞ø‡∞≠‡±Ç‡∞§‡∞ø‡∞Ø‡±ã‡∞ó‡∞É</option><option value="11">11. ‡∞µ‡∞ø‡∞∂‡±ç‡∞µ‡∞∞‡±Ç‡∞™‡∞∏‡∞®‡±ç‡∞¶‡∞∞‡±ç‡∞∂‡∞®‡∞Ø‡±ã‡∞ó‡∞É</option><option value="12">12. ‡∞≠‡∞ï‡±ç‡∞§‡∞ø‡∞Ø‡±ã‡∞ó‡∞É</option><option value="13">13. ‡∞ï‡±ç‡∞∑‡±á‡∞§‡±ç‡∞∞‡∞ï‡±ç‡∞∑‡±á‡∞§‡±ç‡∞∞‡∞ú‡±ç‡∞û‡∞µ‡∞ø‡∞≠‡∞æ‡∞ó‡∞Ø‡±ã‡∞ó‡∞É</option><option value="14">14. ‡∞ó‡±Å‡∞£‡∞§‡±ç‡∞∞‡∞Ø‡∞µ‡∞ø‡∞≠‡∞æ‡∞ó‡∞Ø‡±ã‡∞ó‡∞É</option><option value="15">15. ‡∞™‡±Å‡∞∞‡±Å‡∞∑‡±ã‡∞§‡±ç‡∞§‡∞Æ‡∞™‡±ç‡∞∞‡∞æ‡∞™‡±ç‡∞§‡∞ø‡∞Ø‡±ã‡∞ó‡∞É</option><option value="16">16. ‡∞¶‡±à‡∞µ‡∞æ‡∞∏‡±Å‡∞∞‡∞∏‡∞Æ‡±ç‡∞™‡∞¶‡±ç‡∞µ‡∞ø‡∞≠‡∞æ‡∞ó‡∞Ø‡±ã‡∞ó‡∞É</option><option value="17">17. ‡∞∂‡±ç‡∞∞‡∞¶‡±ç‡∞ß‡∞æ‡∞§‡±ç‡∞∞‡∞Ø‡∞µ‡∞ø‡∞≠‡∞æ‡∞ó‡∞Ø‡±ã‡∞ó‡∞É</option><option value="18">18. ‡∞Æ‡±ã‡∞ï‡±ç‡∞∑‡∞∏‡∞®‡±ç‡∞®‡±ç‡∞Ø‡∞æ‡∞∏‡∞Ø‡±ã‡∞ó‡∞É</option>
               </select>
            </div>
         </div>
      </div>
      <div>
         <h3>Search for word (Telugu or English or Number):</h3>
         <input type="text" id="search-input" placeholder="Enter word or number to search" data-intro="Type a word to search across shlokas" data-title="Enter Query">
         <button id="search-button" data-intro="Click to search" data-title="Run Search">Search</button>
      </div>
      <div class="credits">
         SGS Audio:<br>Pujya Sri Datta Vijayanand Teertha Swamiji<br>
         Sringeri Audio courtesy:<br>Smt Mathangi Kailasnath<br>
         Developed by<br>Dr. P. Udayabhaskar
      </div>

      <!-- Verse Table Modal and rest of your original HTML remains unchanged -->
      <div id="verseTableModal" class="modal"> ... </div>

      <script>
         // ‚Üê All your existing JavaScript code up to the end stays exactly the same,
         //    plus the new Auto Random functions added below:

         let autoRandomTimer = null;
         let autoRandomStyle = null; // 'sgs', 'sringeri', or 'mixed'

         function stopAutoRandom() {
             if (autoRandomTimer) clearTimeout(autoRandomTimer);
             autoRandomTimer = null;
             autoRandomStyle = null;
             document.querySelectorAll('.auto-random-btn').forEach(b => {
                 b.style.backgroundImage = '';
                 b.style.backgroundColor = '';
                 b.style.color = '';
             });
         }

         async function playRandomFullShloka() {
             stopAutoRandom(); // safety

             const style = autoRandomStyle === 'mixed' 
                 ? (Math.random() < 0.5 ? 'sgs' : 'sringeri')
                 : autoRandomStyle || 'sringeri';

             setSelectedStyle(style);

             const chapter = Math.floor(Math.random() * 18) + 1;
             const verse = Math.floor(Math.random() * verseCounts[chapter]) + 1;

             currentContext = currentContext.filter(c => !c.name.includes('shloka-context'));
             currentContext.push({
                 name: `projects/gita-voice-bot/agent/sessions/${sessionId}/contexts/shloka-context`,
                 lifespanCount: 5,
                 parameters: { chapter, verse, style: getSelectedStyle(), showingMeaning: false }
             });
             localStorage.setItem('gitaContext', JSON.stringify(currentContext));

             const sgsTxt = await fetchCombinedShlokaText(chapter, verse, 'sgs');
             const sriTxt = await fetchCombinedShlokaText(chapter, verse, 'sringeri');
             document.getElementById('sgsText').innerText = sgsTxt;
             document.getElementById('sringeriText').innerText = sriTxt;
             adjustTextboxHeight();
             updateTextboxVisibility();

             const folder = getSelectedStyle() === 'sringeri' ? 'AudioFullSringeri' : 'AudioFullSGS';
             const url = `${baseUrl}/${folder}/${chapter}.${verse}.mp3`;

             const audio = document.getElementById('audioPlayer');
             audio.src = url;
             audio.load();
             await audio.play().catch(() => {});
         }

         function startAutoRandom(style) { // style: 'sgs' | 'sringeri' | 'mixed'
             stopAutoRandom();
             autoRandomStyle = style;

             // Visual feedback (conch/chakra)
             const btn = event.target;
             btn.style.backgroundImage = (style === 'sgs') 
                 ? 'url("https://raw.githubusercontent.com/pubsaroja/bhagavad-gita-bot/main/sankhu.png")'
                 : 'url("https://raw.githubusercontent.com/pubsaroja/bhagavad-gita-bot/main/chakra.png")';
             btn.style.backgroundColor = 'transparent';
             btn.style.color = 'transparent';

             async function loop() {
                 await playRandomFullShloka();
                 const audio = document.getElementById('audioPlayer');
                 await new Promise(res => {
                     audio.onended = res;
                     setTimeout(res, 80000); // fallback
                 });
                 await new Promise(res => setTimeout(res, 60000)); // 60s silence
                 if (autoRandomTimer) loop();
             }
             loop();
         }

         // Stop auto-random when user clicks any other major button
         document.querySelectorAll('button').forEach(b => {
             if (!b.classList.contains('auto-random-btn')) {
                 b.addEventListener('click', stopAutoRandom);
             }
         });
         document.querySelectorAll('input[name="style"], .language-group input').forEach(el => {
             el.addEventListener('change', stopAutoRandom);
         });

         // ‚Üê All your original script continues here (initialize(), loadFiles(), etc.)
         // (Everything you already had from the original file)

         // ... [rest of your original <script> content unchanged]

      </script>
   </body>
</html>
